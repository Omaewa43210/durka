(this.webpackJsonpdurka=this.webpackJsonpdurka||[]).push([[0],{161:function(e,t,a){e.exports=a(317)},304:function(e,t){},317:function(e,t,a){"use strict";a.r(t);a(162),a(188),a(190),a(191),a(193),a(194),a(195),a(196),a(197),a(198),a(199),a(200),a(202),a(203),a(204),a(205),a(206),a(207),a(208),a(209),a(210),a(211),a(213),a(214),a(215),a(216),a(217),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(225),a(226),a(227),a(228),a(229),a(230);var n=a(0),c=a.n(n),o=a(91),r=a.n(o),l=a(32),i=a.n(l),s=a(12),m=a(58),u=a.n(m),d=(a(254),a(94)),p=a.n(d),f=a(52),h=a.n(f),b=a(99),g=a.n(b),E=a(71),k=a.n(E),v=a(47),y=a.n(v),C=a(95),O=a.n(C),j=a(96),N=a.n(j),S=a(97),I=a.n(S),w=a(98),P=a.n(w),A=a(37),V=a.n(A),x=a(160),D=a.n(x),U=a(92),K=a.n(U),T=(a(256),a(151)),W=a.n(T),_=a(152),G=a.n(_),z=a(38),F=a.n(z),H=a(51),B=a.n(H),L=a(13),R=a.n(L),q=a(93),J=a.n(q),M=a(153),Q=a.n(M),Z=a(72),X=a.n(Z),Y=a(46),$=a.n(Y),ee=(a(257),a(85),a(149)),te=a.n(ee),ae=function(e){var t=e.id,a=e.firstName,n=e.lastName,o=e.rating,r=e.photoURL,l=e.amount,i="https://vk.com/id"+e.idVk;return c.a.createElement(R.a,{className:"card"},c.a.createElement("span",{className:"listNumber"},t),c.a.createElement($.a,{href:i,target:"_blank"},c.a.createElement(B.a,{className:"myItem",before:r?c.a.createElement(V.a,{src:r}):c.a.createElement(V.a,{src:"https://vk.com/images/camera_200.png"}),description:"DurkaCoins: ".concat(l),asideContent:c.a.createElement(te.a,{fill:"black"}),indicator:o},a+" "+n)))},ne=(a(267),a(150)),ce=a.n(ne),oe=function(e){var t=e.id,a=e.name,n=(e.color,e.price),o=e.icon,r=e.openPay;return c.a.createElement(R.a,{className:"cardShop"},c.a.createElement(B.a,{className:"myItem",before:o,asideContent:c.a.createElement($.a,{id:t,onClick:r,mode:"tertiary"},"\u043a\u0443\u043f\u0438\u0442\u044c"),bottomContent:c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(F.a,{size:"l"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),c.a.createElement(F.a,{size:"l",mode:"secondary",style:{marginLeft:8}},"\u0421\u043a\u0440\u044b\u0442\u044c")),description:"".concat(n," DurkaCoins")},a),c.a.createElement(R.a,{className:"footer"}," ",c.a.createElement(ce.a,{fill:"blue"})," "))},re=function(e){var t=e.id,a=(e.go,e.fetchedUser),n=e.tabShop,o=e.tabHome,r=e.tabTop,l=e.activeTab,i=e.dataUsers,s=(e.progressOnChange,e.dispatch,e.state,e.story,e.addGroup),m=(e.incDec,e.openBase),u=e.dataShop,d=e.openPay,p=e.inventoryOpen,f=e.inventory,h=e.dataInventory,b=(e.getUser,e.durkaCoins),g=e.shisoids,E=(e.transfer,e.targetId,e.onChangeHandlerId,e.onChangeHandlerAmount,e.amount,e.activeModal,e.openTransfer),k=e.snackbar,v=e.userPlace,y=e.rating,C=i.map((function(e,t){return c.a.createElement(ae,{key:e.id,id:t+1,idVk:e.id,photoURL:e.photoURL,firstName:e.firstName,lastName:e.lastName,rating:e.rating,amount:e.durkaCoins})})),O=u.map((function(e){return c.a.createElement(oe,{key:e.id,id:e.id,name:e.name,price:e.price,icon:e.icon,openPay:d})})),j=h.map((function(e){return c.a.createElement(oe,{key:e.id,id:e.id,name:e.name,price:e.price,icon:e.icon,openPay:d})}));return c.a.createElement(W.a,{id:t},c.a.createElement(G.a,null,"\u0414\u0423\u0420\u041a\u0410"),c.a.createElement(J.a,{vertical:"top"},c.a.createElement(Q.a,{className:"TabsDefaultUser"},c.a.createElement(X.a,{onClick:r,selected:"top"===l},"\u0422\u041e\u041f"),c.a.createElement(X.a,{onClick:o,selected:"home"===l},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),c.a.createElement(X.a,{onClick:n,selected:"shop"===l},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"))),"top"===l?c.a.createElement(R.a,{className:"top"},c.a.createElement(R.a,null,"\u0412\u0430\u0448\u0435 \u043c\u0435\u0441\u0442\u043e: ",v," \u0412\u0430\u0448 \u0440\u0435\u0439\u0442\u0438\u043d\u0433 ",y),C):"","home"===l?c.a.createElement(c.a.Fragment,null,c.a.createElement(R.a,{className:"main"},a&&c.a.createElement(c.a.Fragment,null,c.a.createElement(B.a,{before:a.photo_200?c.a.createElement(V.a,{src:a.photo_200,size:120}):null}),c.a.createElement(R.a,null,"".concat(a.first_name," ").concat(a.last_name," ","(\u0428\u0438\u0437\u043e\u0438\u0434)"))),c.a.createElement(R.a,{className:"flexStart"},c.a.createElement(R.a,{className:"divPadding"},"\u041f\u0440\u0438\u0432\u043b\u0435\u0447\u0435\u043d\u043e \u0448\u0438\u0437\u043e\u0438\u0434\u043e\u0432: ",g),c.a.createElement(R.a,{className:"divPadding"},"DurkaCoins: ",b)),c.a.createElement(F.a,{mode:"commerce",size:"xl",stretched:!0,onClick:m},"\u041f\u0440\u0438\u0432\u043b\u0435\u0447\u044c \u0448\u0438\u0437\u043e\u0438\u0434\u043e\u0432"),c.a.createElement(F.a,{className:"buttonAddGroup",mode:"commerce",onClick:s,size:"xl",stretched:!0},"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043d\u0430\u0448\u0443 \u0433\u0440\u0443\u043f\u043f\u0443"),c.a.createElement(F.a,{className:"buttonAddGroup",mode:"commerce",onClick:E,size:"xl",stretched:!0},"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438 DurkaCoins")),c.a.createElement(R.a,{className:"mainInventory"},f?c.a.createElement($.a,{className:"inventory",id:t,onClick:p,mode:"tertiary"},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c"):c.a.createElement(c.a.Fragment,null,c.a.createElement($.a,{className:"inventory",id:t,onClick:p,mode:"tertiary"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c"),c.a.createElement(R.a,null,j)))):"","shop"===l?c.a.createElement(R.a,{className:"top"},O):"",k)},le=a(154),ie=a.n(le),se=a(155),me=a.n(se),ue=a(156),de=a.n(ue),pe=[{id:1,name:"Blue \u043f\u0438\u043b\u044e\u043b\u044f",price:50,icon:c.a.createElement(h.a,{fill:"blue"})},{id:2,name:"Red \u043f\u0438\u043b\u044e\u043b\u044f",price:500,icon:c.a.createElement(h.a,{fill:"red"})},{id:3,name:"Gold \u043f\u0438\u043b\u044e\u043b\u044f",price:5e3,icon:c.a.createElement(h.a,{fill:"orange"})},{id:4,name:"\u041e\u0442\u043f\u0443\u0441\u043a",price:50,icon:c.a.createElement(me.a,{fill:"black"})},{id:5,name:"\u0421\u043c\u0438\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0440\u0443\u0431\u0430\u0448\u043a\u0430",price:50,icon:c.a.createElement(de.a,{fill:"black"})},{id:6,name:"\u041e\u0434\u0438\u043d\u043e\u0447\u043d\u0430\u044f \u043a\u0430\u043c\u0435\u0440\u0430",price:500,icon:c.a.createElement(ie.a,{fill:"black"})}],fe=a(157),he=a(158),be=function(){function e(t){Object(fe.a)(this,e),this.loggerName=t}return Object(he.a)(e,[{key:"log",value:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];(e=console).log.apply(e,["[".concat(this.loggerName,"]")].concat(a))}}]),e}(),ge="https://digital-space74.tk/durka/",Ee=a(159),ke=a.n(Ee)()("https://digital-space74.tk",{path:"/durka/socket",query:document.location.search.slice(1)}),ve=new be("VK"),ye=new be("API"),Ce=new be("socket"),Oe=function(){var e=0,t=0,a=0,o=window.navigator.onLine,r=Object(n.useState)(),l=Object(s.a)(r,2),m=l[0],d=l[1],f=Object(n.useState)(0),b=Object(s.a)(f,2),E=b[0],v=b[1],C=Object(n.useState)(pe),j=Object(s.a)(C,2),S=j[0],w=(j[1],Object(n.useState)()),A=Object(s.a)(w,2),x=A[0],U=(A[1],Object(n.useState)(0)),T=Object(s.a)(U,2),W=T[0],_=T[1],G=Object(n.useState)(null),z=Object(s.a)(G,2),F=z[0],H=z[1],B=Object(n.useState)(0),L=Object(s.a)(B,2),R=L[0],q=L[1],J=Object(n.useState)(null),M=Object(s.a)(J,2),Q=M[0],Z=M[1],X=Object(n.useState)([]),Y=Object(s.a)(X,2),$=Y[0],ee=Y[1],te=Object(n.useState)(0),ae=Object(s.a)(te,2),ne=ae[0],ce=ae[1],oe=Object(n.useState)(!0),le=Object(s.a)(oe,2),ie=le[0],se=le[1],me=Object(n.useState)(!0),ue=Object(s.a)(me,2),de=(ue[0],ue[1],Object(n.useState)("home")),fe=Object(s.a)(de,2),he=fe[0],be=fe[1],Ee=Object(n.useState)(""),Oe=Object(s.a)(Ee,2),je=Oe[0],Ne=Oe[1],Se=Object(n.useState)(null),Ie=Object(s.a)(Se,2),we=Ie[0],Pe=Ie[1],Ae=Object(n.useState)("home"),Ve=Object(s.a)(Ae,2),xe=Ve[0],De=Ve[1],Ue=Object(n.useState)(!1),Ke=Object(s.a)(Ue,2),Te=(Ke[0],Ke[1],Object(n.useState)(!1)),We=Object(s.a)(Te,2),_e=(We[0],We[1]),Ge=Object(n.useState)([{id:1,name:"Blue \u043f\u0438\u043b\u044e\u043b\u044f",price:50,icon:c.a.createElement(h.a,{fill:"blue"})}]),ze=Object(s.a)(Ge,2),Fe=ze[0];ze[1];function He(){var e="https://vk.com/app7351258#".concat(Q.id);i.a.sendPromise("VKWebAppShowStoryBox",{background_type:"image",url:"https://sun1-89.userapi.com/HoZMa0ZNNFflt4SDnoomx0bNiCmRV-bOhbz3qw/hg7IHG1XIvg.jpg",attachment:{text:"game",type:"url",url:e}}).then((function(e){!0===e.data.result&&u.a.post("".concat(ge,"/story"),{search:document.location.search})})).catch((function(e){ve.log("story error:",e)}))}function Be(e){e.preventDefault();var t="https://vk.com/app7351258#".concat(Q.id);i.a.send("VKWebAppShowWallPostBox",{message:"\u0410 \u0442\u044b \u0443\u0436\u0435 \u0431\u044b\u043b \u0432 \u0414\u0423\u0420\u041a\u0415? \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 - ".concat(t),attachments:"photo-192779261_457239018,https://vk.com/app7351258#".concat(Q.id)})}function Le(){u.a.post("".concat(ge,"/getUsers"),{search:document.location.search}).then((function(e){var t=e.data.message;ye.log("users",t),ee(t)}))}function Re(){var e="https://vk.com/app7351258#".concat(Q.id);i.a.sendPromise("VKWebAppGetClientVersion").then((function(t){ve.log(t.platform),"web"===t.platform||"mobile-web"===t.platform?window.navigator.clipboard.writeText(e).then((function(){ve.log("successfully set",e)}),(function(){ve.log("write failed",e)})):i.a.send("VKWebAppCopyText",{text:e})})).catch((function(e){ve.log(e)}))}function qe(){}function Je(e){var a=e.target.value.trim();t=a}function Me(t){var a=t.target.value.trim();e=+a}function Qe(){u.a.post("".concat(ge,"/sendDurkaCoins"),{search:document.location.search,targetId:t,amount:e}).then((function(a){var n=a.data,c=n.status,o=n.message;ye.log("sendDurkaCoins",{status:c,message:o}),"success"===c&&(Le(),e=0,t=0,Pe(null))})).catch((function(e){ye.log("transfer",e)}))}function Ze(e){F||H(c.a.createElement(D.a,{layout:"vertical",onClose:function(){return H(null)},before:c.a.createElement(V.a,{size:24,style:{backgroundColor:"green"}},c.a.createElement(K.a,{fill:"#fff",width:14,height:14}))},e))}Object(n.useEffect)((function(){o?(_e(!1),console.log("checkNetworkStatus",o)):(_e(!0),console.log("checkNetworkStatus",o)),console.log("dataUsers:",$)}),[o]),Object(n.useEffect)((function(){i.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var c=document.createAttribute("scheme");c.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(c)}})),ke.on("user",(function(e){Ce.log("user:",e),ce(e.durkaCoins),_(e.shisoids.length),v(e.rating),Le(),function(){var e=window.location.hash;if(!e||Number.isNaN(+e.replace("#","")))return;var t=Number(e.replace("#",""));u.a.post("".concat(ge,"/addShisoid"),{referrerId:t,search:document.location.search}).then((function(e){ye.log("addShisoid",e.data)})).catch((function(e){ye.log("addShisoid",e)}))}()})),ke.on("users",ee),ke.on("userPlace",q),ke.on("payment",(function(e){var t=e.type,a=e.durkaCoins,n=e.amount,o=e.senderId,r=(e.targetId,e.senderName);Ce.log("payment",e),ce(a),"out"===t?Ze("\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d!"):"in"===t&&Ze(c.a.createElement("span",null,c.a.createElement("a",{href:"https://vk.com/id".concat(o),target:"_blank"},r)," \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b \u0412\u0430\u043c ".concat(n," DurkaCoins")))})),i.a.send("VKWebAppGetUserInfo").then(Z),i.a.sendPromise("VKWebAppGetClientVersion").then((function(e){"ios"===e.platform&&Ne("ios")})).catch(ve.log)}),[]),document.qiwiPay=function(){};return c.a.createElement(p.a,{activePanel:xe,popout:m,modal:we},c.a.createElement(re,{id:"home",fetchedUser:Q,go:function(e){De(e.currentTarget.dataset.to)},tabShop:function(){be("shop")},tabHome:function(){be("home")},tabTop:function(){be("top")},activeTab:he,dataUsers:$,getPlatform:je,story:He,addGroup:function e(){i.a.send("VKWebAppJoinGroup",{group_id:192779261}),ve.log("\u0432\u044b\u0437\u0432\u0430\u043b\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u044e.:",e)},openBase:function e(){console.log("\u0432\u044b\u0437\u0432\u0430\u043b\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u044e",e),d(c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{onClose:function(){return d(null)}},c.a.createElement(y.a,{autoclose:!0,onClick:Re},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"),c.a.createElement(y.a,{autoclose:!0,onClick:He},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"),c.a.createElement(y.a,{autoclose:!0,onClick:Be},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u0435\u043d\u0435"))))},dataShop:S,openPay:function(e){a=e.currentTarget.id,console.log("VALUE targetIdShop",a);var t=.2*S[a-1].price;console.log("priceItem1",t),d(c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{onClose:function(){return d(null)}},c.a.createElement(y.a,{autoclose:!0},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c DurkaCoin"),c.a.createElement(y.a,{autoclose:!0,onClick:document.qiwiPay},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 QIWI"),c.a.createElement(y.a,{autoclose:!0,onClick:qe},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 VK Pay"))))},inventoryOpen:function(){se(!ie)},inventory:ie,dataInventory:Fe,transfer:Qe,targetId:t,targetIdShop:a,onChangeHandlerId:Je,onChangeHandlerAmount:Me,shisoids:W,durkaCoins:ne,amount:e,openTransfer:function(){Pe(c.a.createElement(O.a,{activeModal:"transfer"},c.a.createElement(N.a,{id:"transfer",onClose:function(){return Pe(null)},icon:c.a.createElement(V.a,{size:72,src:"https://sun9-50.userapi.com/c857036/v857036390/aa9a0/i-iQZ4973FQ.jpg"}),header:"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438 DurkaCoins",caption:c.a.createElement(c.a.Fragment,null,c.a.createElement(I.a,null,c.a.createElement(k.a,{top:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f",placeholder:"https://vk.com/durkacoin",onChange:Je,type:"text"}),c.a.createElement(P.a,{top:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u043b-\u0432\u043e DurkaCoins"},c.a.createElement(k.a,{onChange:Me,placeholder:"10",type:"text"})))),actions:[{title:"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438",mode:"commerce",action:function(){Qe()}}]})))},snackbar:F,userPlace:R,rating:E,shopInfo:x}))};i.a.send("VKWebAppInit"),r.a.render(c.a.createElement(Oe,null),document.getElementById("root"))},85:function(e,t,a){}},[[161,1,2]]]);
//# sourceMappingURL=main.e982e3e1.chunk.js.map